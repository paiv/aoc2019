; read movement command
; north (1), south (2), west (3), and east (4)

00000: in [1033]
00002: mov [1032], [1033] == 1
00006: jnz [1032], 31
00009: mov [1032], [1033] == 2
00013: jnz [1032], 58
00016: mov [1032], [1033] == 3
00020: jnz [1032], 81
00023: mov [1032], [1033] == 4
00027: jnz [1032], 104
00030: hlt

; move north
00031: mul [1039], 1, [1034]
00035: add [1041], 0, [1036]
00039: add [1040], [1035], -1
00043: mov [1043], [1038] == 0
00047: mul [1032], -1, [1043]
00051: add [1042], [1037], [1032]
00055: jnz 1, 124

; move south
00058: add [1039], [1034], 0
00062: mul [1041], 1, [1036]
00066: add [1040], [1035], 1
00070: mov [1043], [1038] == 0
00074: add [1042], [1037], [1038]
00078: jz 0, 124

; move west
00081: add [1039], [1034], -1
00085: mov [1041], [1036] == 0
00089: mul [1040], 1, [1035]
00093: mul [1043], [1038], 1
00097: add [1042], 0, [1037]
00101: jz 0, 124

; move east
00104: add [1039], [1034], 1
00108: mov [1041], [1036] == 0
00112: mul [1040], [1035], 1
00116: mul [1043], 1, [1038]
00120: add [1042], 0, [1037]

; check borders
00124: jz [1039], 217
00127: jz [1040], 217
00130: mov [1032], [1039] == 40
00134: jnz [1032], 217
00137: mov [1032], [1040] == 40
00141: jnz [1032], 217

; oxygen tank
00144: mov [1032], [1039] == 37
00148: jz [1032], 165
00151: mov [1032], [1040] == 39
00155: jz [1032], 165
00158: mul [1044], 2, 1
00162: jz 0, 224

; every odd row, odd col is space
00165: mul [1032], [1041], [1043]
00169: jz [1032], 179
00172: add [1044], 0, 1
00176: jnz 1, 224

; every even row, even col is a wall
00179: add [1032], [1041], [1043]
00183: jz [1032], 217

; decode data table
00186: add [1032], [1042], [1043]
00190: add [1032], [1032], -1
00194: mul [1032], [1032], 39
00198: add [1032], [1032], [1039]
00202: add [1032], -1, [1032]
00206: add [211], 252, [1032]
00210: mov [1044], [0] < 74
00214: jz 0, 224

00217: mul [1044], 0, 1
00221: jz 0, 224

00224: jz [1044], 247

; update coords
00227: mul [1034], [1039], 1
00231: mul [1035], 1, [1040]
00235: mul [1036], [1041], 1
00239: mul [1038], 1, [1043]
00243: add [1037], [1042], 0

; write status: wall (0), moved (1), oxygen (2)
00247: out [1044]
00249: jz 0, 0

00252: dw 4, 35, 96, 8, 87, 44, 67, 40
00260: dw 80, 25, 91, 53, 86, 23, 96, 7
00268: dw 76, 76, 10, 30, 90, 46, 47, 40
00276: dw 93, 75, 3, 17, 1, 19, 89, 7
00284: dw 92, 47, 95, 3, 92, 39, 72, 69
00292: dw 6, 18, 86, 94, 19, 82, 98, 9
00300: dw 7, 91, 42, 86, 29, 83, 65, 43
00308: dw 91, 71, 92, 16, 96, 82, 5, 81
00316: dw 6, 92, 93, 76, 71, 17, 91, 91
00324: dw 73, 64, 33, 27, 89, 4, 99, 81
00332: dw 80, 6, 57, 87, 9, 42, 99, 97
00340: dw 13, 42, 81, 82, 72, 68, 35, 93
00348: dw 2, 99, 6, 6, 94, 2, 39, 39
00356: dw 86, 43, 97, 77, 86, 21, 56, 75
00364: dw 61, 91, 82, 56, 94, 32, 47, 90
00372: dw 33, 72, 93, 13, 87, 12, 42, 68
00380: dw 99, 71, 34, 97, 79, 87, 99, 79
00388: dw 25, 42, 95, 97, 51, 93, 80, 33
00396: dw 71, 68, 89, 50, 49, 78, 77, 24
00404: dw 93, 70, 13, 11, 56, 29, 18, 77
00412: dw 77, 94, 60, 80, 75, 84, 42, 87
00420: dw 90, 58, 84, 27, 78, 3, 80, 70
00428: dw 85, 79, 4, 36, 94, 65, 79, 93
00436: dw 94, 13, 97, 75, 49, 92, 15, 84
00444: dw 5, 85, 35, 67, 96, 87, 64, 32
00452: dw 83, 97, 20, 89, 64, 18, 93, 32
00460: dw 46, 91, 57, 53, 75, 56, 7, 56
00468: dw 92, 99, 36, 22, 93, 19, 25, 29
00476: dw 48, 86, 94, 68, 18, 95, 79, 87
00484: dw 97, 55, 75, 44, 65, 82, 99, 31
00492: dw 94, 42, 53, 81, 72, 85, 70, 93
00500: dw 47, 40, 77, 60, 85, 87, 11, 60
00508: dw 98, 25, 90, 88, 93, 93, 85, 64
00516: dw 43, 88, 96, 36, 83, 14, 98, 40
00524: dw 48, 11, 18, 80, 97, 49, 23, 2
00532: dw 91, 85, 50, 88, 94, 41, 75, 99
00540: dw 84, 15, 45, 9, 81, 83, 96, 51
00548: dw 56, 58, 76, 72, 50, 94, 59, 76
00556: dw 87, 10, 25, 88, 73, 99, 20, 95
00564: dw 46, 93, 88, 2, 50, 89, 86, 26
00572: dw 18, 85, 72, 85, 75, 66, 83, 25
00580: dw 97, 96, 25, 94, 14, 34, 94, 89
00588: dw 57, 88, 78, 17, 92, 59, 40, 29
00596: dw 84, 87, 55, 61, 81, 9, 82, 93
00604: dw 17, 33, 81, 81, 58, 43, 91, 68
00612: dw 86, 80, 61, 83, 23, 46, 78, 60
00620: dw 14, 94, 79, 28, 91, 57, 79, 83
00628: dw 48, 92, 5, 49, 97, 81, 56, 53
00636: dw 84, 42, 58, 93, 20, 71, 29, 29
00644: dw 89, 88, 34, 31, 87, 92, 78, 62
00652: dw 78, 72, 93, 3, 54, 97, 82, 38
00660: dw 32, 89, 86, 88, 38, 19, 84, 51
00668: dw 99, 60, 90, 95, 14, 78, 11, 82
00676: dw 89, 12, 87, 98, 70, 79, 33, 76
00684: dw 44, 97, 79, 33, 19, 34, 83, 58
00692: dw 4, 89, 21, 88, 78, 46, 78, 76
00700: dw 66, 61, 92, 91, 38, 86, 27, 61
00708: dw 86, 46, 52, 97, 44, 80, 89, 53
00716: dw 55, 47, 83, 34, 44, 97, 37, 41
00724: dw 92, 28, 70, 95, 82, 91, 76, 8
00732: dw 99, 2, 80, 1, 66, 96, 71, 94
00740: dw 1, 44, 89, 29, 13, 99, 35, 80
00748: dw 89, 31, 91, 19, 77, 46, 85, 77
00756: dw 93, 61, 31, 62, 14, 92, 82, 73
00764: dw 94, 86, 20, 31, 94, 72, 73, 44
00772: dw 61, 91, 79, 40, 88, 69, 85, 6
00780: dw 83, 96, 49, 12, 77, 39, 83, 91
00788: dw 24, 70, 13, 81, 57, 39, 88, 38
00796: dw 23, 80, 43, 92, 67, 46, 87, 25
00804: dw 80, 93, 82, 68, 98, 93, 63, 85
00812: dw 29, 18, 78, 94, 27, 89, 85, 20
00820: dw 63, 89, 93, 96, 99, 50, 71, 97
00828: dw 15, 28, 53, 78, 85, 78, 82, 64
00836: dw 67, 14, 94, 47, 96, 65, 58, 81
00844: dw 20, 91, 36, 82, 55, 11, 85, 87
00852: dw 59, 84, 6, 67, 87, 69, 88, 81
00860: dw 68, 38, 84, 52, 33, 79, 97, 69
00868: dw 89, 89, 34, 96, 18, 78, 67, 87
00876: dw 36, 93, 57, 77, 77, 21, 47, 99
00884: dw 27, 26, 79, 7, 88, 37, 90, 33
00892: dw 25, 96, 66, 83, 24, 30, 82, 84
00900: dw 16, 82, 85, 15, 55, 92, 20, 80
00908: dw 92, 38, 20, 34, 87, 67, 11, 84
00916: dw 28, 42, 93, 26, 54, 89, 85, 78
00924: dw 82, 60, 14, 9, 76, 85, 10, 80
00932: dw 80, 50, 85, 29, 86, 20, 61, 81
00940: dw 80, 51, 32, 88, 91, 92, 34, 56
00948: dw 79, 58, 76, 41, 47, 89, 24, 40
00956: dw 90, 85, 88, 30, 48, 91, 42, 2
00964: dw 91, 95, 98, 60, 79, 40, 86, 61
00972: dw 79, 81, 23, 91, 91, 12, 21, 78
00980: dw 54, 75, 61, 11, 79, 89, 73, 84
00988: dw 13, 95, 81, 6, 52, 92, 37, 76
00996: dw 65, 82, 84, 87, 40, 94, 70, 78
01004: dw 71, 83, 46, 94, 2, 79, 57, 80
01012: dw 35, 99, 21, 83, 81, 93, 64, 81
01020: dw 78, 99, 57, 87, 49, 87, 41, 92
01028: dw 83, 82, 58, 92

; tmp
01032: dw 0
; in
01033: dw 0
; current coords
01034: dw 21, 21, 1, 10, 1
; next coords
01039: dw 0, 0, 0, 0, 0
; out
01044: dw 0
